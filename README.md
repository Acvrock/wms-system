# WMS 仓库管理系统

一个专为耳机配件电商设计的简单仓库管理系统，支持配件管理、套装组合、库存追踪和补货计划。

## 提示词
```
AI Agent开发一套【WMS系统】需求：

背景：
我在某电商平台销售有线入耳式耳机套装产品，套装中除了一款有线耳机外，还会额外搭配例如 附赠耳机线、解码耳放、耳机收纳盒、TYPE-C至3.5mm适配器 等等多种配件。
现在的难点是，随着配件的多元化、套装多样化，依靠一份EXCEL表格已经很难管理这些配件，我需要一个简单的WMS系统，来提升管理和感知仓库已有配件的种类和数量，以及 评估仍需采购数量、记录配件出库去处（用于哪款套装、丢弃了检查出的不良品 等）

一、功能
新建配件
新建套装
预估补货
新增入库
出库记录
新增出库
库存概览
账号管理

二、功能详细介绍
1、新建配件
可以新建【配件】，参数包括【图片】【价格】【名称】【描述】
2、新建套装
可以新建【套装】，参数包括【图片】【名称】【描述】；并且可以关联多个【配件】
3、预估补货
1）可以新建【补货计划】，参数包括【名称】【描述】，隐性参数【创建时间】；并且可以关联多个【套装】，和设置各个【套装】的数量；创建中和创建后都可以统计和查看该【补货计划】下所有【套装】中的所有同款【配件】的数量和总价，并细分出其中每款【套装】中各个【配件】的数量和总价。
2）【补货计划】新建时，页面上有【临时保存】/【保存】/【取消】3个按钮。
如果当前库存中各个【配件】数量不满足该【补货计划】所需，则置灰且不可点击【保存】按钮，并提示所缺【配件】种类和总数，并展示其中对应各【套装】缺的【配件】种类和数量；
如果当前库存中各个【配件】数量满足该【补货计划】所需，则【保存】正常展示并可以点击，点击后进行二次确认，提示语"一旦保存则会对库存进行扣减"，有 确定/取消 按键，点击确定，则【补货计划】正式扣除对应的各个【配件】的数量；
如果有【配件】的数量不满足【补货计划】所需，用户可以点击【临时保存】，点击后，对应的【配件】数量不进行扣减，用户可以等待采购好对应【配件】并入库后再点【保存】，【临时保存】状态下的【补货计划】支持变更【套装】种类以及数量；点击【保存】时再对对应的【配件】数量是否满足扣减进行一次确认，满足数量的话，就进行二次确认，提示语"一旦保存则会对库存进行扣减"，有 确定/取消 按键。
2）【补货计划】的状态有2种，【打包中】和【已打包】，创建【补货计划】点击【临时保存】则进入【打包中】，【补货计划】点击【保存】则进入【已打包】；【打包中】意味着其中包含的【套装】种类和数量仍可能变化，该状态下的【补货计划】还可以进行编辑，【已打包】则意味着【套装】种类和数量已确定，不会再需要变更，没有编辑按钮。
4、新增入库
可以新增某个【配件】的入库数量，并可以填写对应备注
5、出库记录
可以列出每件【配件】的出库记录，也就是关联到【已打包】的【补货计划】，例如【补货计划】A中包含100件【配件】甲，那么【补货计划】A的是否打包状态变成【已打包】后，【配件】甲就数量-100；该出库记录需要展示对应的【补货计划】，以及该【补货计划】中各【套装】使用的该【配件】的数量
6、新增出库
也可以手动新建一条出库记录，参数【原因】【数量】【详细描述】，这个功能主要用于盘整，针对像丢货、发现和丢弃不良品等情况
7、库存概览
可以查看现有各个【配件】的当前库存数量及对应总价

三、账号管理
分 BOSS、管理员 2种角色/账号
1）管理员 无法查看到【配件】的价格（包括 补货计划、库存出库 中的配件的价格，总之就是价格就显示***
2）BOSS可以设置自己和管理员账号的密码
3）2者初始密码都是123456aa

四、部署要求
需要输出一个离线软件包，可以通过浏览器对
http://localhost:3000
进行访问。
启动可以以.bat批处理文件进行启动。
需要兼容Windows10 11。
```

## 功能特性

### 核心功能
- **配件管理**: 创建、编辑配件信息，支持图片上传和价格管理
- **套装管理**: 创建套装并关联多个配件，支持复杂的产品组合
- **补货计划**: 智能库存验证，支持临时保存和正式打包两种状态
- **库存管理**: 实时库存概览、入库出库记录追踪
- **权限管理**: 角色分离，管理员无法查看价格信息

### 技术特点
- **离线运行**: 无需联网，本地SQLite数据库
- **角色权限**: BOSS和管理员两种角色，价格信息分级显示
- **状态管理**: 补货计划状态机，确保库存操作的原子性
- **响应式UI**: 基于Ant Design的现代化界面

## 快速开始

### Windows系统（推荐）

#### Method 1: Recommended Windows Setup
1. Double-click `install-windows.bat` (comprehensive first-time setup)
2. Double-click `RUN.bat` (to start server)
3. Access http://localhost:3000

#### Method 2: Quick Setup
1. Double-click `SETUP.bat` (first time only)
2. Double-click `RUN.bat` (to start server)
3. Access http://localhost:3000

#### Method 3: Smart Start
1. Double-click `start.bat` (auto-setup and start)
2. Access http://localhost:3000

#### Database Fix (if needed)
If you see "Cannot find module 'sql.js'" error:
- Double-click `fix-sqlite.bat` (reinstall dependencies)
- This will reinstall the pure JavaScript database library

#### Port Issues
- Double-click `kill-port.bat` to free port 3000
- System will auto-try ports 3001, 3002, etc.

#### 手动启动（备用方案）
如果启动脚本无法使用，请打开命令提示符手动执行：
```bash
# 安装后端依赖
npm install

# 安装前端依赖
cd client
npm install

# 构建前端
npm run build
cd ..

# 启动系统
npm start
```

### 故障排除

如果遇到问题，请查看 `启动说明.txt` 文件，其中包含：
- 常见错误解决方案
- Node.js安装指导
- 端口冲突解决
- 权限问题处理

## 默认账户

- **老板账户**: `boss` / `123456aa`
- **管理员账户**: `manager` / `123456aa`

## 系统架构

### 后端 (Node.js + Express)
- **数据库**: sql.js (纯JavaScript SQLite数据库)
- **认证**: JWT token
- **文件上传**: Multer
- **API设计**: RESTful

### 前端 (React + Ant Design)
- **路由**: React Router
- **UI组件**: Ant Design
- **HTTP客户端**: Axios
- **构建工具**: Vite

### 核心业务逻辑

#### 补货计划状态机
```
创建计划 → 临时保存 → 打包中 → 验证库存 → 已打包 → 扣减库存
```

#### 权限控制
- **BOSS**: 完整访问权限，可查看所有价格信息
- **管理员**: 基础操作权限，价格信息显示为 `***`

## 部署要求

- Windows 10/11
- Node.js 16.0+
- 无需额外数据库安装

## 开发指南

### 项目结构
```
wms/
├── server/           # 后端代码
│   ├── models/       # 数据模型
│   ├── routes/       # API路由
│   ├── middleware/   # 中间件
│   └── uploads/      # 文件上传目录
├── client/           # 前端代码
│   └── src/
│       ├── components/
│       ├── pages/
│       ├── services/
│       └── utils/
└── start.bat         # Windows启动脚本
```

### 开发命令
```bash
npm run dev          # 开发模式
npm run build        # 构建生产版本
npm start           # 启动生产服务器
npm run install:all # 安装所有依赖
```

## 数据库模式

### 核心表结构
- `users` - 用户账户
- `components` - 配件信息
- `bundles` - 套装定义
- `bundle_components` - 套装配件关联
- `restock_plans` - 补货计划
- `restock_plan_bundles` - 补货计划套装关联
- `inbound_records` - 入库记录
- `outbound_records` - 出库记录

## 许可证

MIT License
